var __async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});import{r as reactExports,j as jsxRuntimeExports,h as Typography,B as Box,Q as TableContainer,P as Paper,U as Table,V as TableHead,W as TableRow,X as TableCell,Y as TableBody,F as Chip,k as IconButton,H as y}from"./react-mui-core-CD28kaIJ.js";import{i as DeleteIcon}from"./mui-icons-Bbp48fiL.js";import{A as API}from"./api-CPHjYns6.js";function AdminUsers(){const[users,setUsers]=reactExports.useState([]),[loading,setLoading]=reactExports.useState(true);reactExports.useEffect(()=>{fetchUsers()},[]);const fetchUsers=()=>__async(this,null,function*(){try{const res=yield API.get("/auth/users");setUsers(res.data||[])}catch(error){}finally{setLoading(false)}}),handleDelete=id=>__async(this,null,function*(){var _a,_b;if(window.confirm("Are you sure you want to delete this user?"))try{yield API.delete(`/auth/users/${id}`);y.success("User deleted successfully!");fetchUsers()}catch(error){y.error((null==(_b=null==(_a=error.response)?void 0:_a.data)?void 0:_b.message)||"Failed to delete user")}});return loading?jsxRuntimeExports.jsx(Typography,{children:"Loading..."}):jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",fontWeight:800,gutterBottom:true,children:"Users"}),jsxRuntimeExports.jsx(Typography,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Manage user accounts"}),jsxRuntimeExports.jsx(TableContainer,{component:Paper,children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx("strong",{children:"Name"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx("strong",{children:"Email"})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx("strong",{children:"Role"})}),jsxRuntimeExports.jsx(TableCell,{align:"right",children:jsxRuntimeExports.jsx("strong",{children:"Actions"})})]})}),jsxRuntimeExports.jsx(TableBody,{children:users.map(user=>jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:user.name}),jsxRuntimeExports.jsx(TableCell,{children:user.email}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Chip,{label:user.isAdmin?"Admin":"User",color:user.isAdmin?"primary":"default",size:"small"})}),jsxRuntimeExports.jsx(TableCell,{align:"right",children:!user.isAdmin&&jsxRuntimeExports.jsx(IconButton,{color:"error",onClick:()=>handleDelete(user._id),children:jsxRuntimeExports.jsx(DeleteIcon,{})})})]},user._id))})]})})]})}export{AdminUsers as default};
